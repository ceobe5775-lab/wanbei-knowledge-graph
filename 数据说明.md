# 数据说明文档

## 数据概览

### 已整理的数据集

1. **花园口决堤**
   - 节点: 83个
   - 关系: 100条
   - 事件: 29个
   - 人物: 23个
   - 地点: 31个
   - 数据来源: `花园口决堤_Neo4j导入脚本_最终版.cypher`

2. **淝水之战**
   - 节点: 6个
   - 关系: 12条
   - 数据来源: `neo4j导入数据/淝水.json`

3. **双堆集战争**
   - 节点: 39个
   - 关系: 70条
   - 数据来源: `neo4j导入数据/双堆集.json`

### 合计统计

- **总节点**: 128个
- **总关系**: 182条
- **事件节点**: 35个
- **人物节点**: 42个
- **地点节点**: 31个
- **时间节点**: 0个

## CSV关系数据

以下CSV文件包含额外的关系数据，已保存但尚未完全整合到节点关系中：

1. **rel_E&E.csv** - 事件与事件关系 (70条)
2. **rel_E&L.csv** - 事件与地点关系 (586条)
3. **rel_E&P.csv** - 事件与人物关系 (988条)
4. **rel_P&L.csv** - 人物与地点关系 (1485条)
5. **rel_P&P.csv** - 人物与人物关系 (547条)

## 数据属性

### 标准属性

每个节点都包含以下标准属性：
- `data_source`: 数据来源文件
- `import_time`: 导入时间戳

### 节点属性

#### 事件节点
- `name` 或 `名称`: 事件名称
- `lat`: 纬度（如有）
- `lng`: 经度（如有）
- `时间`: 事件发生时间（如有）
- `描述`: 事件描述（如有）

#### 人物节点
- `name` 或 `姓名`: 人物姓名
- `lat`: 纬度（如有）
- `lng`: 经度（如有）
- `角色` 或 `战役`: 角色信息（如有）

#### 地点节点
- `name` 或 `名称`: 地点名称
- `lat`: 纬度（如有）
- `lng`: 经度（如有）

## 数据文件结构

```
展示网站/
├── data.json              # 完整数据（所有数据集）
├── data_花园口决堤.json   # 花园口决堤单独数据
├── data_淝水之战.json     # 淝水之战单独数据
├── data_双堆集战争.json   # 双堆集战争单独数据
└── organize_data.py       # 数据整理脚本
```

## 数据使用

### 在JavaScript中加载数据

```javascript
// 加载完整数据
const response = await fetch('data.json');
const data = await response.json();

// 访问组合数据
const allNodes = data.combined.nodes;
const allEvents = data.combined.events;
const allPersons = data.combined.persons;
const allLocations = data.combined.locations;

// 访问特定数据集
const huayuanData = data.datasets.find(d => d.dataset === '花园口决堤');
```

### 筛选数据

```javascript
// 按数据来源筛选
const huayuanNodes = allNodes.filter(n => 
    n.properties.data_source === '花园口决堤_Neo4j导入脚本_最终版.cypher'
);

// 按标签筛选
const eventNodes = allNodes.filter(n => 
    n.labels.includes('事件')
);
```

## 下一步工作

1. **整合CSV数据**: 将CSV关系数据转换为标准节点和关系格式
2. **补充缺失属性**: 为节点补充坐标、描述等属性
3. **数据验证**: 验证数据的完整性和准确性
4. **数据展示**: 在展示网站中可视化展示这些数据

## 数据更新

运行数据整理脚本更新数据：

```bash
cd 展示网站
python organize_data.py
```

这将重新读取所有源文件并生成最新的 `data.json` 文件。












