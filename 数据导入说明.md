# 数据导入说明

## 概述

本项目支持从CSV文件导入数据到Neo4j数据库，并提供了多种数据可视化方式。

## 数据文件

位于 `E:\新建文件夹\neo4j导入数据\` 目录下的CSV文件：

1. **events.csv** - 事件数据
2. **persons.csv** - 人物数据
3. **geo_coords.csv** - 地点坐标数据
4. **rel_E&P.csv** - 事件与人物关系
5. **rel_P&P.csv** - 人物与人物关系
6. **rel_E&L.csv** - 事件与地点关系
7. **rel_P&L.csv** - 人物与地点关系
8. **rel_E&E.csv** - 事件与事件关系

## 导入步骤

### 1. 配置Neo4j连接

编辑 `import_csv_to_neo4j.py` 文件，修改以下配置：

```python
NEO4J_URI = "bolt://localhost:7687"
NEO4J_USER = "neo4j"
NEO4J_PASSWORD = "qJIANG556"  # 修改为实际密码
```

### 2. 运行导入脚本

```bash
cd "E:\新建文件夹\展示网站"
python import_csv_to_neo4j.py
```

### 3. 整理数据（可选）

如果需要将CSV数据整合到JSON文件中供前端使用：

```bash
python organize_data.py
```

这将生成 `data.json` 文件，包含所有整合后的数据。

## 功能说明

### 1. 地理地图 (map-interactive.html)

基于Leaflet的交互式地图，支持：
- 显示事件、人物、地点标记
- 按类型、数据集、城市筛选
- 地图和列表视图切换
- **市和县的边界线条粗细区分**（市2.5px，县1.0px）

### 2. 事件分布地图 (map-canvas.html)

基于Canvas的事件分布可视化，支持：
- 仅显示事件分布
- 鼠标拖拽平移
- 滚轮缩放
- 事件悬停提示
- 点击查看事件详情

### 3. 数据整理脚本 (organize_data.py)

功能：
- 整合CSV数据到JSON格式
- 处理事件、人物、地点节点
- 处理各种关系数据
- 生成统计信息

## 使用建议

1. **首次使用**：先运行 `import_csv_to_neo4j.py` 导入数据到Neo4j
2. **前端展示**：运行 `organize_data.py` 生成JSON数据文件
3. **查看地图**：
   - 访问 `map-interactive.html` 查看完整地理地图
   - 访问 `map-canvas.html` 查看事件分布地图

## 注意事项

- 确保Neo4j数据库已启动
- CSV文件编码应为UTF-8（带BOM）
- 坐标数据（lng, lat）必须为有效的浮点数
- 边界数据文件位于 `boundaries/` 目录下

## 文件结构

```
展示网站/
├── import_csv_to_neo4j.py    # Neo4j数据导入脚本
├── organize_data.py           # 数据整理脚本
├── map-interactive.html       # 交互式地图页面
├── map-interactive.js         # 交互式地图脚本
├── map-canvas.html            # Canvas地图页面
├── map-canvas.js              # Canvas地图脚本
├── data.json                  # 整合后的数据文件
└── boundaries/                # 边界GeoJSON数据
    ├── 亳州市.json
    ├── 淮北市.json
    ├── 阜阳市.json
    ├── 淮南市.json
    ├── 宿州市.json
    └── 蚌埠市.json
```





























